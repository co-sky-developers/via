package main

import (
	"fmt"
	"net/http"
	"testing"
)

func BenchmarkPointCorrection(b *testing.B) {
	for i := 0; i < b.N; i++ {
		CorrectPoint(server.Config, Coord{62.24, 25.74}, "finland")
	}
}

func BenchmarkPointToCoordinateTranslation(b *testing.B) {
	for i := 0; i < b.N; i++ {
		nodes := []int{728652, 110611, 626130, 715935, 731568, 545875, 239476, 111993, 22456, 484102, 207355, 813582, 704462, 800619, 319546, 447197, 433927, 210866, 397484, 191488, 752941, 858119, 225867, 558678, 751816, 873106, 606328, 44716, 545995, 191895, 417374, 581142, 5765, 766736, 441376, 754878, 137704, 110343, 877904, 462092, 703282, 321789, 271075, 74256, 708213, 487186, 864125, 434782, 897834, 668585, 481143, 328200, 755791, 787787, 804898, 517329, 38329, 385557, 52910, 147543, 332693, 508533, 78022, 182641, 755700, 588135, 171704, 792301, 404424, 12331, 463707, 682149, 514431, 660553, 50353, 301574, 111580, 159890, 697437, 433239, 880503, 213494, 821491, 434268, 463123, 185742, 74775, 267689, 234777, 882035, 629121, 124414, 805268, 34744, 238945, 426994, 358980, 467814, 882226, 348105, 49877, 421225, 886172, 660210, 808690, 117593, 552176, 353276, 381605, 479289, 143576, 215157, 459668, 107667, 297354, 34686, 321908, 485800, 230598, 67389, 872273, 221739, 732023, 587348, 753484, 406863, 418034, 24114, 658888, 585920, 594738, 594682, 9963, 399355, 105233, 235726, 546929, 186023, 670348, 609799, 783980, 513459, 773869, 480130, 108777, 92163, 175665, 828870, 722232, 69790, 790840, 803213, 151523, 828589, 376782, 134263, 253693, 790789, 152821, 365474, 232532, 602094, 835697, 211793, 510894, 764759, 295461, 245014, 598198, 155135, 512634, 483572, 279703, 740451, 83830, 29656, 582624, 57196, 294203, 648408, 67383, 628856, 435138, 418317, 558189, 43173, 651859, 412915, 239282, 502303, 522995, 484783, 322710, 498161, 402752, 536297, 20764, 765584, 449088, 276625, 17355, 533171, 834635, 254981, 383510, 209309, 891922, 772809, 477182, 367671, 667245, 367083, 337482, 725056, 902133, 852205, 401564, 140367, 503914, 131911, 212593, 69331, 181539, 168629, 283736, 183020, 295266, 548967, 518341, 707482, 125622, 434149, 398782, 741374, 8138, 419563, 268158, 618699, 503931, 528594, 37995, 490222, 764459, 407982, 687149, 91850, 890969, 668736, 143210, 480549, 698890, 12724, 803503, 277601, 355647, 257762, 261803, 424876, 423287, 452671, 212446, 406612, 433707, 282632, 174221, 675019, 268424, 192268, 768974, 615963, 52, 180939, 774339, 271686, 77732, 37234, 731231, 713928, 109461, 735758, 253337, 197115, 333738, 510371, 569408, 816725, 37155, 807837, 46437, 746214, 121659, 698470, 43366, 269891, 52628, 12462, 401050, 660123, 899435, 755973, 822040, 654775, 295733, 184192, 185815}
		GetCoordinates(server.Config, "finland", nodes)
	}
}

func BenchmarkAPIPointCorrection(b *testing.B) {
	for i := 0; i < b.N; i++ {
		query_string := fmt.Sprintf("lat=%f&long=%f&country=%s", 62.24, 25.74, "finland")
		request := fmt.Sprintf("http://localhost:%d/point?%s", server.Config.Port, query_string)
		_, err := http.Get(request)
		if err != nil {
			b.Fatal(err)
		}
	}
}
